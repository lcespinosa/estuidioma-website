---
// src/components/Contact.astro
const { contact } = Astro.props;
const address = contact?.address || "Calle Ejemplo 123, Madrid";
const fb = (contact?.facebook || "").trim();
const ig = (contact?.instagram || "").trim();
const hasFb = /^https?:\/\//i.test(fb);
const hasIg = /^https?:\/\//i.test(ig);
---
<section id="contact" class="section contact reveal reveal-up">
  <div class="wrap">
    <h2>Contacto</h2>
    <div class="contact__grid">
      <form action="https://api.web3forms.com/submit" method="POST" class="form">
        <input type="hidden" name="access_key" value="6959bec1-a69a-4cc3-a3a0-160ebbe80985">
        <label>Nombre <input type="text" name="name" required /></label>
        <label>Email <input type="email" name="email" required /></label>
        <label>Teléfono <input type="tel" name="phone" /></label>
        <label>Mensaje <textarea name="message" required></textarea></label>
        <button type="submit" class="btn btn-primary">Enviar</button>
      </form>

      <div class="contact__info">
        <p class="muted" style="margin-top:0">
          ¿Tienes dudas? Te respondemos en menos de 24 h.
        </p>
        <ul style="list-style:none;">
          {contact?.phone && (
            <li>
              <a href={`tel:${contact.phone}`} style="display:flex; align-items:center; gap:6px; color:inherit; text-decoration:none;">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M6.6 10.8a15.1 15.1 0 006.6 6.6l2.2-2.2a1 1 0 011-.24c1.1.36 2.3.56 3.6.56a1 1 0 011 1V21a1 1 0 01-1 1C11.1 22 2 12.9 2 2a1 1 0 011-1h4.5a1 1 0 011 1c0 1.3.2 2.5.6 3.6a1 1 0 01-.2 1L6.6 10.8z"/></svg>
                {contact.phone}
              </a>
            </li>
          )}
          {contact?.email && (
            <li>
              <a href={`mailto:${contact.email}`} style="display:flex; align-items:center; gap:6px; color:inherit; text-decoration:none;">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
                {contact.email}
              </a>
            </li>
          )}
          {contact?.address && (
            <li>{contact.address}</li>
          )}
        </ul>
      </div>

      <div class="contact__map">
        <div class="map">
          <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d1758.4790345712227!2d-78.70638118331031!3d22.011419247166014!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e1!3m2!1ses!2ses!4v1759075988441!5m2!1ses!2ses" width="400" height="300" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
      </div>

    </div>
  </div>
</section>
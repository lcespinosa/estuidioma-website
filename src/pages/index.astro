---
import "../styles/global.css";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import Hero from "../components/Hero.astro";
import FeaturesFromNotion from "../components/FeaturesFromNotion.astro";
import CourseCard from "../components/CourseCard.astro";
import Section from "../components/Section.astro";
import Contact from "../components/Contact.astro";
import Tape from "../components/Tape.astro";
import CtaStrip from "../components/CtaStrip.astro";
import Teachers from "../components/Teachers.astro";
import mountReveal from "../scripts/reveal";

import { fetchSiteData } from "../lib/notion";
const { courses, teachers, features, home, claim, experiencia, servicios, contact } = await fetchSiteData();
---
<html lang="es">
<head>
  <meta charset="utf-8" />  <!-- ðŸ‘ˆ DEBE ir arriba del todo -->
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{home?.title || "Estudiomacuba"}</title>
</head>

<body>
<Header />
<main>
  <Tape />
  <Hero
    title={home?.title || "Estudiomacuba"}
    subtitle={home?.body || home?.seoDescription}
    image="/img/hero.jpg" />

  <section id="courses" class="section">
    <div class="wrap">
      <h2>Cursos</h2>
      <div class="grid cards">
        {courses.map(c => <CourseCard course={c} />)}
      </div>
    </div>
  </section>

  <FeaturesFromNotion items={features} />

  <Teachers items={teachers} />

  <CtaStrip />

  {[experiencia, servicios, claim].filter(Boolean).map((sec, i) => (
    <Section item={sec} index={i} />
  ))}

  <Contact contact={contact} />
</main>
<Footer contact={contact} />

<script>
    import mountReveal from "/src/scripts/reveal.ts";
    mountReveal();
</script>

</body>
</html>